# 一、DHT11基础储备

DHT11 数字温湿度传感器是一款含有已校准数字信号输出的温湿度复合传感器，内部由一个 8 位单片机控制一个电阻式感湿元件和一个 NTC 测温元件。DHT11 虽然也是采用单总线协议，但是该协议与 DS18B20 的单总线协议稍微有些不同之处。

相比于 DS18B20 只能测量温度，DHT11 既能检测温度又能检测湿度，不过 DHT11 的精度和测量范围都要低于 DS18B20，其温度测量范围为 0~50℃，误差在±2℃；湿度的测量范围为 20%~90%RH（Relative Humidity 相对湿度—指空气中水汽压与饱和水汽压的百分比），误差在±5%RH。DHT11 电路很简单，只需要将 DATA 引脚连接单片机的一个 I/O 即可，不过该引脚需要上拉一个 5K 的电阻，DHT11 的供电电压为 3~5.5V。

# 二、接口说明

## 1.接线图

![](https://cdn.jsdelivr.net/gh/lcekold/blogimage@main/Network/DHT11dsdsx.png)

DHT11引脚说明

|Pin|	名称	|注释|
| -----|------|-------- |
|1|	VDD|	供电 3-5.5V|
|2|	GND|	接地，电源负极|
|3|	DATA|	串行数据，单总线|
|4|	NC|	空脚，请悬空|

## 2.电源引脚

DHT11的供电电压为3~5.5 V。传感器上电后，要等待 1s 以越过不稳定状态，在此期间无需发送任何指令。电源引脚（VDD，GND）之间可增加一个100nF 的电容，用以去耦滤波。

## 3.串行接口（单线双向）

DATA 用于微处理器与 DHT11之间的通讯和同步，采用单总线数据格式，一次通讯时间4ms左右，数据分小数部分和整数部分

# 三、协议及数据格式

DHT11 采用单总线协议与单片机通信，单片机发送一次复位信号后，DHT11 从低功耗模式转换到高速模式，等待主机复位结束后，DHT11 发送响应信号，并拉高总线准备传输数据。一次完整的数据为 40bit，按照高位在前，低位在后的顺序传输。

数据格式为：8bit 湿度整数数据+8bit 湿度小数数据+8bit 温度整数数据+8bit 温度小数数据+8bit 校验和，一共 5 字节（40bit）数据。由于 DHT11 分辨率只能精确到个位，所以小数部分是数据全为 0。校验和为前 4 个字节数据相加，校验的目的是为了保证数据传输的准确性。

DHT11 只有在接收到开始信号后才触发一次温湿度采集，如果没有接收到主机发送复位信号，DHT11 不主动进行温湿度采集。当数据采集完毕且无开始信号后，DHT11 自动切换到低速模式。

    注意：由于 DHT11 时序要求非常严格，所以在操作时序的时候，为了防止中断干扰总线时序，先关闭总中断，操作完毕后再打开总中断。

# 参考

<a href="https://blog.csdn.net/m0_55849362/article/details/126426768">DHT11详细介绍（内含51和STM32代码）</a>

