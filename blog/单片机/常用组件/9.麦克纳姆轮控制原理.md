# 一、物理原理

## 1.1 两种轮

对于四轮小车来说，一套麦克纳姆轮至少应含有两种不同的轮子，民间叫法有很多，百度上将他们称为：“麦克纳姆轮左和麦克纳姆轮右”

下面简称左轮和右轮

左轮：正转可以向左前方运动，反转向右后方的轮（注意是运动方向，与给地面摩擦力的方向相反）

<div><img src="https://cdn.jsdelivr.net/gh/lcekold/blogimage@main/Network/0e136a42e47efabcf3a7508ec32217fa.png"></div>

右轮：正转向右前方运动，反转向左后方的轮

<div><img src="https://cdn.jsdelivr.net/gh/lcekold/blogimage@main/Network/e80efb7f8230fb66e8fe2df8d381ff17.png"></div>

当主轮转动时会带动周边轮的转动，而周边轮与主轮的转动成一定角度，所以可以产生一个斜向的力。因此多个麦轮组合使用、分别控制就可以使小车在主轮方向不变的情况下实现全向移动了（如果一时没想清楚就请继续看下面对各个运动状态的分析）。

对于左右轮旋转会产生什么方向的力是关键，你可以尝试着进行受力分析，这里就没必要讲解了，只需要大脑里稍微想象应该一下就明白了（或者直接记上面的结论也是一样的）

核心就是利用安装的对称性抵消不需要的力，叠加目标速度方向的力。

只需知道麦轮这些基本的物理特性就足够控制麦轮了。

## 1.2 一种可行的安装方式

对于四轮小车来说；一般来说的安装方式是：

<div><img src="https://cdn.jsdelivr.net/gh/lcekold/blogimage@main/Network/9768c5551238963f24b9b047580d6c96.png"></div>

图为一辆麦轮小车的俯视图，其中左前方和右后方的轮为左轮，其余两个为右轮

不同的安装方式必然导致控制的不同，但是原理都是类似的，以下的讲解均以此安装方式为例，其他的控制方式可以以相同的方式分析。

# 二、控制

## 2.1 前进/后退

以上述方式安装的麦轮同时正转时，前部两个轮与后方两个轮的侧方的力都可以抵消，只剩下向前方的力。小车就可以向前运动

<div><img src="https://cdn.jsdelivr.net/gh/lcekold/blogimage@main/Network/ca12f5bdc5bf679a9ad878bf050dcdde.png"></div>

图为，向前时横向移动的力

后退反转即可，分析同理

## 2.2 左右平移

原理是将小车同一侧的两个麦轮以相反的方向旋转，这样沿前后方的力就会抵消，而横向的力有恰好是同一方向。

<div><img src="https://cdn.jsdelivr.net/gh/lcekold/blogimage@main/Network/7270aae21bb82a925b978291620566bd.png"></div>

例如向左移动就所有右轮全反转，左轮全正转。

## 2.3 自旋

原理就是一侧的轮子向后，另一侧的轮子向前；这样对于同一侧的两个轮子来说，横向的力还是可以抵消

<div><img src="https://cdn.jsdelivr.net/gh/lcekold/blogimage@main/Network/550188e13de3a7962d402c2c71e5081c.png"></div>

如左侧两个轮子正转，右侧两个轮子反转就可以使小车顺势针旋转，反之则逆时针


以上这几种运动方式需要注意的是，四个轮子虽然转的方向不同，但是转速需要严格相同，不然运动就不再准确。
但是

当我们需要向其他任意方向平动的话，可以将小车速度分解为xy两轴上的方向，分别将这两个分速度的值计算出四个轮子的转速，再将这两套轮子的转度叠加，就可以还原回最开始要求的特殊的小车合速度。

这样四个轮子的转速就不再相同，小车的运动也就不再限于前后与左右，而是你需要的任何方向。

## 2.4 转弯
这个对于可以做到全向移动的麦轮小车不是很有必要，不过原理不麻烦，和普通的车轮一样，就是让一侧的速度大于另一侧就行了，因为同侧的两个轮子速度是相同的，所以横向（向心）的力还是可以抵消，只是原来的直线力/速度变成了切线而已。

